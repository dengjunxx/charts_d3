!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["cbi-charts"]=t():e["cbi-charts"]=t()}("undefined"!=typeof self?self:this,function(){return webpackJsonpcbi_charts([18],{123:function(e,t,n){var o=n(0),i=n(124),r=n(89),a=n(160);function s(e){this.pointerChecker,this._zr=e,this._opt={};var t=o.bind,n=t(d,this),r=t(l,this),a=t(h,this),s=t(u,this),f=t(c,this);i.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(t,i){this.disable(),this._opt=o.defaults(o.clone(i)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",a)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",s),e.on("pinch",f))},this.disable=function(){e.off("mousedown",n),e.off("mousemove",r),e.off("mouseup",a),e.off("mousewheel",s),e.off("pinch",f)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function d(e){if(!(r.isMiddleOrRightButtonOnMouseUpDown(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}}function l(e){if(this._dragging&&m("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!a.isTaken(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,o=this._x,i=this._y,s=t-o,d=n-i;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&r.stop(e.event),p(this,"pan","moveOnMouseMove",e,{dx:s,dy:d,oldX:o,oldY:i,newX:t,newY:n})}}function h(e){r.isMiddleOrRightButtonOnMouseUpDown(e)||(this._dragging=!1)}function u(e){var t=m("zoomOnMouseWheel",e,this._opt),n=m("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,i=Math.abs(o),r=e.offsetX,a=e.offsetY;if(0!==o&&(t||n)){if(t){var s=i>3?1.4:i>1?1.2:1.1;f(this,"zoom","zoomOnMouseWheel",e,{scale:o>0?s:1/s,originX:r,originY:a})}if(n){var d=Math.abs(o);f(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(o>0?1:-1)*(d>3?.4:d>1?.15:.05),originX:r,originY:a})}}}function c(e){a.isTaken(this._zr,"globalPan")||f(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function f(e,t,n,o,i){e.pointerChecker&&e.pointerChecker(o,i.originX,i.originY)&&(r.stop(o.event),p(e,t,n,o,i))}function p(e,t,n,i,r){r.isAvailableBehavior=o.bind(m,null,n,i),e.trigger(t,r)}function m(e,t,n){var i=n[e];return!e||i&&(!o.isString(i)||t.event[i+"Key"])}o.mixin(s,i);var g=s;e.exports=g},145:function(e,t){var n={axisPointer:1,tooltip:1,brush:1};t.onIrrelevantElement=function(e,t,o){var i=t.getComponentByElement(e.topTarget),r=i&&i.coordinateSystem;return i&&i!==o&&!n[i.mainType]&&r&&r.model!==o}},153:function(e,t){t.updateViewOnPan=function(e,t,n){var o=e.target,i=o.position;i[0]+=t,i[1]+=n,o.dirty()},t.updateViewOnZoom=function(e,t,n,o){var i=e.target,r=e.zoomLimit,a=i.position,s=i.scale,d=e.zoom=e.zoom||1;if(d*=t,r){var l=r.min||0,h=r.max||1/0;d=Math.max(Math.min(h,d),l)}var u=d/e.zoom;e.zoom=d,a[0]-=(n-a[0])*(u-1),a[1]-=(o-a[1])*(u-1),s[0]*=u,s[1]*=u,i.dirty()}},154:function(e,t){t.updateCenterAndZoom=function(e,t,n){var o=e.getZoom(),i=e.getCenter(),r=t.zoom,a=e.dataToPoint(i);null!=t.dx&&null!=t.dy&&(a[0]-=t.dx,a[1]-=t.dy,i=e.pointToData(a),e.setCenter(i));if(null!=r){if(n){var s=n.min||0,d=n.max||1/0;r=Math.max(Math.min(o*r,d),s)/o}e.scale[0]*=r,e.scale[1]*=r;var l=e.position,h=(t.originX-l[0])*(r-1),u=(t.originY-l[1])*(r-1);l[0]-=h,l[1]-=u,e.updateTransform(),i=e.pointToData(a),e.setCenter(i),e.setZoom(r*o)}return{center:e.getCenter(),zoom:e.getZoom()}}},155:function(e,t,n){var o=n(0),i=n(38),r=n(93),a=n(39),s=n(185),d=i.applyTransform;function l(){s.call(this)}function h(e){this.name=e,this.zoomLimit,s.call(this),this._roamTransformable=new l,this._rawTransformable=new l,this._center,this._zoom}function u(e,t,n,o){var i=n.seriesModel,r=i?i.coordinateSystem:null;return r===this?r[e](o):null}o.mixin(l,s),h.prototype={constructor:h,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,n,o){return this._rect=new a(e,t,n,o),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,n,o){this.transformTo(e,t,n,o),this._viewRect=new a(e,t,n,o)},transformTo:function(e,t,n,o){var i=this.getBoundingRect(),r=this._rawTransformable;r.transform=i.calculateTransform(new a(e,t,n,o)),r.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),o=this.getCenter(),r=this.getZoom();o=i.applyTransform([],o,e),n=i.applyTransform([],n,e),t.origin=o,t.position=[n[0]-o[0],n[1]-o[1]],t.scale=[r,r],this._updateTransform()},_updateTransform:function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),r.copy(this.transform||(this.transform=[]),t.transform||r.create()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],r.invert(this.invTransform,this.transform),this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,n){var o=t?this._rawTransform:this.transform;return n=n||[],o?d(n,e,o):i.copy(n,e)},pointToData:function(e){var t=this.invTransform;return t?d([],e,t):[e[0],e[1]]},convertToPixel:o.curry(u,"dataToPoint"),convertFromPixel:o.curry(u,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},o.mixin(h,s);var c=h;e.exports=c},160:function(e,t,n){var o="\0_ec_interaction_mutex";function i(e){return e[o]||(e[o]={})}n(1).registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),t.take=function(e,t,n){i(e)[t]=n},t.release=function(e,t,n){var o=i(e);o[t]===n&&(o[t]=null)},t.isTaken=function(e,t){return!!i(e)[t]}},161:function(e,t,n){var o=n(0),i=o.each,r="\0__link_datas",a="\0__link_mainData";function s(e,t){if((i=this)[a]===i){var n=o.extend({},this[r]);n[this.dataType]=t,u(t,n,e)}else c(t,this.dataType,this[a],e);var i;return t}function d(e,t){return e.struct&&e.struct.update(this),t}function l(e,t){return i(t[r],function(n,o){n!==t&&c(n.cloneShallow(),o,t,e)}),t}function h(e){var t=this[a];return null==e||null==t?t:t[r][e]}function u(e,t,n){e[r]={},i(t,function(t,o){c(t,o,e,n)})}function c(e,t,n,o){n[r][t]=e,e[a]=n,e.dataType=t,o.struct&&(e[o.structAttr]=o.struct,o.struct[o.datasAttr[t]]=e),e.getLinkedData=h}var f=function(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,u(t,n,e),i(n,function(n){i(t.TRANSFERABLE_METHODS,function(t){n.wrapMethod(t,o.curry(s,e))})}),t.wrapMethod("cloneShallow",o.curry(l,e)),i(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,o.curry(d,e))}),o.assert(n[t.dataType]===t)};e.exports=f},184:function(e,t,n){var o=n(14);function i(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function r(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function a(e,t,n){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:n}function s(e,t,n){var o=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=o,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=o}function d(e,t){return e.parentNode===t.parentNode?1:2}t.init=function(e){e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t,n,o=[e];t=o.pop();)if(n=t.children,t.isExpand&&n.length)for(var i=n.length-1;i>=0;i--){var r=n[i];r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:i,thread:null},o.push(r)}},t.firstWalk=function(e,t){var n=e.isExpand?e.children:[],o=e.parentNode.children,d=e.hierNode.i?o[e.hierNode.i-1]:null;if(n.length){!function(e){for(var t=e.children,n=t.length,o=0,i=0;--n>=0;){var r=t[n];r.hierNode.prelim+=o,r.hierNode.modifier+=o,i+=r.hierNode.change,o+=r.hierNode.shift+i}}(e);var l=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;d?(e.hierNode.prelim=d.hierNode.prelim+t(e,d),e.hierNode.modifier=e.hierNode.prelim-l):e.hierNode.prelim=l}else d&&(e.hierNode.prelim=d.hierNode.prelim+t(e,d));e.parentNode.hierNode.defaultAncestor=function(e,t,n,o){if(t){for(var d=e,l=e,h=l.parentNode.children[0],u=t,c=d.hierNode.modifier,f=l.hierNode.modifier,p=h.hierNode.modifier,m=u.hierNode.modifier;u=i(u),l=r(l),u&&l;){d=i(d),h=r(h),d.hierNode.ancestor=e;var g=u.hierNode.prelim+m-l.hierNode.prelim-f+o(u,l);g>0&&(s(a(u,e,n),e,g),f+=g,c+=g),m+=u.hierNode.modifier,f+=l.hierNode.modifier,c+=d.hierNode.modifier,p+=h.hierNode.modifier}u&&!i(d)&&(d.hierNode.thread=u,d.hierNode.modifier+=m-c),l&&!r(h)&&(h.hierNode.thread=l,h.hierNode.modifier+=f-p,n=e)}return n}(e,d,e.parentNode.hierNode.defaultAncestor||o[0],t)},t.secondWalk=function(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier},t.separation=function(e){return arguments.length?e:d},t.radialCoordinate=function(e,t){var n={};return e-=Math.PI/2,n.x=t*Math.cos(e),n.y=t*Math.sin(e),n},t.getViewRect=function(e,t){return o.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}},215:function(e,t,n){var o=n(0),i=n(45),r=n(161),a=n(77),s=n(99),d=function(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t};function l(e,t,n){this.root,this.data,this._nodes=[],this.hostModel=e,this.levelModels=o.map(t||[],function(t){return new i(t,e,e.ecModel)}),this.leavesModel=new i(n||{},e,e.ecModel)}d.prototype={constructor:d,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),e=e||{},o.isString(e)&&(e={order:e});var i,r=e.order||"preorder",a=this[e.attr||"children"];"preorder"===r&&(i=t.call(n,this));for(var s=0;!i&&s<a.length;s++)a[s].eachNode(e,t,n);"postorder"===r&&t.call(n,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var o=this.children[n];o.updateDepthAndHeight(e+1),o.height>t&&(t=o.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,o=n.length;t<o;t++){var i=n[t].getNodeById(e);if(i)return i}},contains:function(e){if(e===this)return!0;for(var t=0,n=this.children,o=n.length;t<o;t++){var i=n[t].contains(e);if(i)return i}},getAncestors:function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0)){var t,n=this.hostTree,o=n.data.getItemModel(this.dataIndex),i=this.getLevelModel();return i||0!==this.children.length&&(0===this.children.length||!1!==this.isExpand)||(t=this.getLeavesModel()),o.getModel(e,(i||t||n.hostModel).getModel(e))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},l.prototype={constructor:l,type:"tree",eachNode:function(e,t,n){this.root.eachNode(e,t,n)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,n=0,o=t.length;n<o;n++)t[n].dataIndex=-1;for(n=0,o=e.count();n<o;n++)t[e.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},l.createTree=function(e,t,n){var i=new l(t,n.levels,n.leaves),h=[],u=1;!function e(t,n){var r=t.value;u=Math.max(u,o.isArray(r)?r.length:1);h.push(t);var a=new d(t.name,i);n?function(e,t){var n=t.children;if(e.parentNode===t)return;n.push(e),e.parentNode=t}(a,n):i.root=a;i._nodes.push(a);var s=t.children;if(s)for(var l=0;l<s.length;l++)e(s[l],a)}(e),i.root.updateDepthAndHeight(0);var c=s(h,{coordDimensions:["value"],dimensionsCount:u}),f=new a(c,t);return f.initData(h),r({mainData:f,struct:i,structAttr:"tree"}),i.update(),i};var h=l;e.exports=h},307:function(e,t,n){var o=n(1);n(308),n(309),n(310);var i=n(94),r=n(311);o.registerVisual(i("tree","circle")),o.registerLayout(r)},308:function(e,t,n){var o=n(35),i=n(215),r=n(25).encodeHTML,a=o.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},n=e.leaves||{},o={};o.leaves=n;var r=i.createTree(t,this,o),a=0;r.eachNode("preorder",function(e){e.depth>a&&(a=e.depth)});var s=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:a;return r.root.eachNode("preorder",function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=s}),r.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,n=t.root.children[0],o=t.getNodeByDataIndex(e),i=o.getValue(),a=o.name;o&&o!==n;)a=o.parentNode.name+"."+a,o=o.parentNode;return r(a+(isNaN(i)||null==i?"":" : "+i))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});e.exports=a},309:function(e,t,n){var o=n(0),i=n(4),r=n(150),a=n(184).radialCoordinate,s=n(1),d=n(188),l=n(155),h=n(153),u=n(123),c=n(145).onIrrelevantElement,f=s.extendChartView({type:"tree",init:function(e,t){this._oldTree,this._mainGroup=new i.Group,this._controller=new u(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,n,o){var i=e.getData(),r=e.layoutInfo,a=this._mainGroup,s=e.get("layout");"radial"===s?a.attr("position",[r.x+r.width/2,r.y+r.height/2]):a.attr("position",[r.x,r.y]),this._updateViewCoordSys(e),this._updateController(e,t,n);var d=this._data,l={expandAndCollapse:e.get("expandAndCollapse"),layout:s,orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};i.diff(d).add(function(t){p(i,t)&&g(i,t,null,a,e,l)}).update(function(t,n){var o=d.getItemGraphicEl(n);p(i,t)?g(i,t,o,a,e,l):o&&v(d,n,o,a,e,l)}).remove(function(t){var n=d.getItemGraphicEl(t);n&&v(d,t,n,a,e,l)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===l.expandAndCollapse&&i.eachItemGraphicEl(function(t,o){t.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:o})})}),this._data=i},_updateViewCoordSys:function(e){var t=e.getData(),n=[];t.each(function(e){var o=t.getItemLayout(e);!o||isNaN(o.x)||isNaN(o.y)||n.push([+o.x,+o.y])});var o=[],i=[];d.fromPoints(n,o,i),i[0]-o[0]==0&&(i[0]+=1,o[0]-=1),i[1]-o[1]==0&&(i[1]+=1,o[1]-=1);var r=e.coordinateSystem=new l;r.zoomLimit=e.get("scaleLimit"),r.setBoundingRect(o[0],o[1],i[0]-o[0],i[1]-o[1]),r.setCenter(e.get("center")),r.setZoom(e.get("zoom")),this.group.attr({position:r.position,scale:r.scale}),this._viewCoordSys=r},_updateController:function(e,t,n){var o=this._controller,i=this._controllerHost,r=this.group;o.setPointerChecker(function(t,o,i){var a=r.getBoundingRect();return a.applyTransform(r.transform),a.contain(o,i)&&!c(t,n,e)}),o.enable(e.get("roam")),i.zoomLimit=e.get("scaleLimit"),i.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(t){h.updateViewOnPan(i,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})},this).on("zoom",function(t){h.updateViewOnZoom(i,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),this._updateNodeAndLinkScale(e)},this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),n=this._getNodeGlobalScale(e),o=[n,n];t.eachItemGraphicEl(function(e,t){e.attr("scale",o)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,o=t.scale,i=o&&o[0]||1;return((t.getZoom()-1)*n+1)/i},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}});function p(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==e.getItemVisual(t,"symbol")}function m(e,t,n){return n.itemModel=t,n.itemStyle=t.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=t.getModel("lineStyle").getLineStyle(),n.labelModel=t.getModel("label"),n.hoverLabelModel=t.getModel("emphasis.label"),!1===e.isExpand&&0!==e.children.length?n.symbolInnerColor=n.itemStyle.fill:n.symbolInnerColor="#fff",n}function g(e,t,n,a,s,d){var l=!n,h=e.tree.getNodeByDataIndex(t),u=(d=m(h,h.getModel(),d),e.tree.root),c=h.parentNode===u?h:h.parentNode||h,f=e.getItemGraphicEl(c.dataIndex),p=c.getLayout(),g=f?{x:f.position[0],y:f.position[1],rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:p,v=h.getLayout();l?(n=new r(e,t,d)).attr("position",[g.x,g.y]):n.updateData(e,t,d),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=v.rawX,n.__radialRawY=v.rawY,a.add(n),e.setItemGraphicEl(t,n),i.updateProps(n,{position:[v.x,v.y]},s);var x=n.getSymbolPath();if("radial"===d.layout){var N,_,w=u.children[0],T=w.getLayout(),M=w.children.length;if(v.x===T.x&&!0===h.isExpand){var I={};I.x=(w.children[0].getLayout().x+w.children[M-1].getLayout().x)/2,I.y=(w.children[0].getLayout().y+w.children[M-1].getLayout().y)/2,(N=Math.atan2(I.y-T.y,I.x-T.x))<0&&(N=2*Math.PI+N),(_=I.x<T.x)&&(N-=Math.PI)}else(N=Math.atan2(v.y-T.y,v.x-T.x))<0&&(N=2*Math.PI+N),0===h.children.length||0!==h.children.length&&!1===h.isExpand?(_=v.x<T.x)&&(N-=Math.PI):(_=v.x>T.x)||(N-=Math.PI);var b=_?"left":"right";x.setStyle({textPosition:b,textRotation:-N,textOrigin:"center",verticalAlign:"middle"})}if(h.parentNode&&h.parentNode!==u){var L=n.__edge;L||(L=n.__edge=new i.BezierCurve({shape:y(d,g,g),style:o.defaults({opacity:0,strokeNoScale:!0},d.lineStyle)})),i.updateProps(L,{shape:y(d,p,v),style:{opacity:1}},s),a.add(L)}}function v(e,t,n,o,r,a){for(var s,d=e.tree.getNodeByDataIndex(t),l=e.tree.root,h=(a=m(d,d.getModel(),a),d.parentNode===l?d:d.parentNode||d);null==(s=h.getLayout());)h=h.parentNode===l?h:h.parentNode||h;i.updateProps(n,{position:[s.x+1,s.y+1]},r,function(){o.remove(n),e.setItemGraphicEl(t,null)}),n.fadeOut(null,{keepLabel:!0});var u=n.__edge;u&&i.updateProps(u,{shape:y(a,s,s),style:{opacity:0}},r,function(){o.remove(u)})}function y(e,t,n){var o,i,r,s,d,l,h,u,c=e.orient;if("radial"===e.layout){d=t.rawX,h=t.rawY,l=n.rawX,u=n.rawY;var f=a(d,h),p=a(d,h+(u-h)*e.curvature),m=a(l,u+(h-u)*e.curvature),g=a(l,u);return{x1:f.x,y1:f.y,x2:g.x,y2:g.y,cpx1:p.x,cpy1:p.y,cpx2:m.x,cpy2:m.y}}return d=t.x,h=t.y,l=n.x,u=n.y,"LR"!==c&&"RL"!==c||(o=d+(l-d)*e.curvature,i=h,r=l+(d-l)*e.curvature,s=u),"TB"!==c&&"BT"!==c||(o=d,i=h+(u-h)*e.curvature,r=l,s=u+(h-u)*e.curvature),{x1:d,y1:h,x2:l,y2:u,cpx1:o,cpy1:i,cpx2:r,cpy2:s}}e.exports=f},310:function(e,t,n){var o=n(1),i=n(154).updateCenterAndZoom;o.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var n=e.dataIndex,o=t.getData().tree.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),o.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var n=t.coordinateSystem,o=i(n,e);t.setCenter&&t.setCenter(o.center),t.setZoom&&t.setZoom(o.zoom)})})},311:function(e,t,n){var o=n(312),i=o.eachAfter,r=o.eachBefore,a=n(184),s=a.init,d=a.firstWalk,l=a.secondWalk,h=a.separation,u=a.radialCoordinate,c=a.getViewRect;e.exports=function(e,t){e.eachSeriesByType("tree",function(e){!function(e,t){var n=c(e,t);e.layoutInfo=n;var o=e.get("layout"),a=0,f=0,p=null;"radial"===o?(a=2*Math.PI,f=Math.min(n.height,n.width)/2,p=h(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(a=n.width,f=n.height,p=h());var m=e.getData().tree.root,g=m.children[0];if(g){s(m),i(g,d,p),m.hierNode.modifier=-g.hierNode.prelim,r(g,l);var v=g,y=g,x=g;r(g,function(e){var t=e.getLayout().x;t<v.getLayout().x&&(v=e),t>y.getLayout().x&&(y=e),e.depth>x.depth&&(x=e)});var N=v===y?1:p(v,y)/2,_=N-v.getLayout().x,w=0,T=0,M=0,I=0;if("radial"===o)w=a/(y.getLayout().x+N+_),T=f/(x.depth-1||1),r(g,function(e){M=(e.getLayout().x+_)*w,I=(e.depth-1)*T;var t=u(M,I);e.setLayout({x:t.x,y:t.y,rawX:M,rawY:I},!0)});else{var b=e.getOrient();"RL"===b||"LR"===b?(T=f/(y.getLayout().x+N+_),w=a/(x.depth-1||1),r(g,function(e){I=(e.getLayout().x+_)*T,M="LR"===b?(e.depth-1)*w:a-(e.depth-1)*w,e.setLayout({x:M,y:I},!0)})):"TB"!==b&&"BT"!==b||(w=a/(y.getLayout().x+N+_),T=f/(x.depth-1||1),r(g,function(e){M=(e.getLayout().x+_)*w,I="TB"===b?(e.depth-1)*T:f-(e.depth-1)*T,e.setLayout({x:M,y:I},!0)}))}}}(e,t)})}},312:function(e,t){t.eachAfter=function(e,t,n){for(var o,i=[e],r=[];o=i.pop();)if(r.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)i.push(a[s])}for(;o=r.pop();)t(o,n)},t.eachBefore=function(e,t){for(var n,o=[e];n=o.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var r=i.length-1;r>=0;r--)o.push(i[r])}}},381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=n.n(o),r=n(307),a=(n.n(r),n(382)),s=n(33);t.default=i()({},s.a,{name:"CbiTreeChart",data:function(){return this.chartHandler=a.a,{}}})},382:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n(11),i=n.n(o),r=n(40),a=n.n(r),s=n(24);var d=function(e,t,n,o){var r=n.dimension,d=void 0===r?e[0]:r,l=n.measures,h=void 0===l?e[1]:l,u=n.seriesMap,c=void 0===u?{}:u,f=o.legendVisible,p=o.tooltipFormatter,m=o.tooltipVisible;return{series:function(e){var t=e.dimension,n=e.measures,o=e.rows,r=e.seriesMap,d=[];return o.forEach(function(e){var o=e[t],l=r[o],h={type:"tree",name:e[t],data:e[n]};r[e[t]]&&a()(l).forEach(function(e){Object(s.i)(h[e])?i()(h[e],l[e]):h[e]=l[e]}),d.push(h)}),d}({dimension:d,measures:h,rows:t,seriesMap:c}),legend:f&&t.length>1&&function(e){var t=e.dimension;return{data:e.rows.map(function(e){return e[t]})}}({dimension:d,rows:t}),tooltip:m&&{trigger:"item",triggerOn:"mousemove",formatter:{tooltipFormatter:p}.tooltipFormatter}}}},94:function(e,t){e.exports=function(e,t,n){return{seriesType:e,performRawSeries:!0,reset:function(e,o,i){var r=e.getData(),a=e.get("symbol")||t,s=e.get("symbolSize"),d=e.get("symbolKeepAspect");if(r.setVisual({legendSymbol:n||a,symbol:a,symbolSize:s,symbolKeepAspect:d}),!o.isSeriesFiltered(e)){var l="function"==typeof s;return{dataEach:r.hasItemOption||l?function(t,n){if("function"==typeof s){var o=e.getRawValue(n),i=e.getDataParams(n);t.setItemVisual(n,"symbolSize",s(o,i))}if(t.hasItemOption){var r=t.getItemModel(n),a=r.getShallow("symbol",!0),d=r.getShallow("symbolSize",!0),l=r.getShallow("symbolKeepAspect",!0);null!=a&&t.setItemVisual(n,"symbol",a),null!=d&&t.setItemVisual(n,"symbolSize",d),null!=l&&t.setItemVisual(n,"symbolKeepAspect",l)}}:null}}}}}}},[381])});