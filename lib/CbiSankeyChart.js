!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["cbi-charts"]=e():t["cbi-charts"]=e()}("undefined"!=typeof self?self:this,function(){return webpackJsonpcbi_charts([11],{15:function(t,e,n){var o=n(16).f,i=n(36),r=n(2)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,r)&&o(t,r,{configurable:!0,value:e})}},161:function(t,e,n){var o=n(0),i=o.each,r="\0__link_datas",a="\0__link_mainData";function u(t,e){if((i=this)[a]===i){var n=o.extend({},this[r]);n[this.dataType]=e,d(e,n,t)}else f(e,this.dataType,this[a],t);var i;return e}function s(t,e){return t.struct&&t.struct.update(this),e}function c(t,e){return i(e[r],function(n,o){n!==e&&f(n.cloneShallow(),o,e,t)}),e}function l(t){var e=this[a];return null==t||null==e?e:e[r][t]}function d(t,e,n){t[r]={},i(e,function(e,o){f(e,o,t,n)})}function f(t,e,n,o){n[r][e]=t,t[a]=n,t.dataType=e,o.struct&&(t[o.structAttr]=o.struct,o.struct[o.datasAttr[e]]=t),t.getLinkedData=l}var h=function(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,d(e,n,t),i(n,function(n){i(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,o.curry(u,t))})}),e.wrapMethod("cloneShallow",o.curry(c,t)),i(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,o.curry(s,t))}),o.assert(n[e.dataType]===e)};t.exports=h},17:function(t,e,n){"use strict";var o=n(21);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,o){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=o}),this.resolve=o(e),this.reject=o(n)}(t)}},18:function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return d}),n.d(e,"d",function(){return h}),n.d(e,"b",function(){return v}),n.d(e,"a",function(){return g}),e.g=function(t,e,n){void 0!==t[e]?t[e].push(n):t[e]=[n]};var o=n(55),i=n.n(o),r=n(40),a=n.n(r),u=n(107),s=n(24);u.a.setOptions({defaultFormat:"0,0",scalePercentBy100:!0,abbrLabel:{th:"K",mi:"M",bi:"B",tr:"T"}});var c=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(isNaN(t))return o;if(!e)return t;if(Object(s.h)(e))return e(t,u.a);n=isNaN(n)?0:++n;var i=".["+new Array(n).join(0)+"]",r=e;switch(e){case"KMB":r=n?"0,0"+i+"a":"0,0a";break;case"normal":r=n?"0,0"+i:"0,0";break;case"percent":r=n?"0,0"+i+"%":"0,0.[00]%"}return Object(u.a)(t,r)},l=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(isNaN(t))return o;if(!e)return t;if(Object(s.h)(e))return e(t,u.a);n=isNaN(n)?0:++n;var i=".["+new Array(n).join(0)+"]",r=e;switch(e){case"KMB":r=n?"0,0"+i+"a":"0,0a";break;case"normal":r=n?"0,0"+i:"0,0";break;case"percent":r=""}return Object(u.a)(t,r)},d=function(t){var e={};return a()(t).forEach(function(n){t[n].forEach(function(t){e[t]=n})}),e},f={},h=function(t){var e,n=t.position,o=t.positionJsonLink,r=t.beforeRegisterMapOnce,a=t.mapURLProfix,u=o||""+a+n+".json";return f[u]||(f[u]=(e=u,new i.a(function(t,n){var o=new XMLHttpRequest;o.open("GET",e),o.send(null),o.onload=function(){t(JSON.parse(o.responseText))},o.onerror=function(){n(JSON.parse(o.responseText))}})).then(function(t){return r&&(t=r(t)),t})),f[u]},p=null,y=null,v=function(t,e){return p||(p=new i.a(function(n,o){var i="bmap"+Date.now();window[i]=n;var r=document.createElement("script");r.src=["https://api.map.baidu.com/api?v="+(e||"2.0"),"ak="+t,"callback="+i].join("&"),document.body.appendChild(r)})),p},g=function(t,e){return y||(y=new i.a(function(n,o){var i="amap"+Date.now();window[i]=n;var r=document.createElement("script");r.src=["https://webapi.amap.com/maps?v="+(e||"1.4.3"),"key="+t,"callback="+i].join("&"),document.body.appendChild(r)})),y}},2:function(t,e,n){var o=n(95)("wks"),i=n(87),r=n(3).Symbol,a="function"==typeof r;(t.exports=function(t){return o[t]||(o[t]=a&&r[t]||(a?r:i)("Symbol."+t))}).store=o},224:function(t,e,n){var o=n(0),i=n(77),r=n(275),a=n(161),u=n(99),s=n(82),c=n(90);t.exports=function(t,e,n,l,d){for(var f=new r(l),h=0;h<t.length;h++)f.addNode(o.retrieve(t[h].id,t[h].name,h),h);var p=[],y=[],v=0;for(h=0;h<e.length;h++){var g=e[h],x=g.source,m=g.target;f.addEdge(x,m,v)&&(y.push(g),p.push(o.retrieve(g.id,x+" > "+m)),v++)}var L,_=n.get("coordinateSystem");if("cartesian2d"===_||"polar"===_)L=c(t,n);else{var b=s.get(_),I=b&&"view"!==b.type&&b.dimensions||[];o.indexOf(I,"value")<0&&I.concat(["value"]);var w=u(t,{coordDimensions:I});(L=new i(w,n)).initData(t)}var S=new i(["value"],n);return S.initData(y,p),d&&d(L,S),a({mainData:L,struct:f,structAttr:"graph",datas:{node:L,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),f.update(),f}},225:function(t,e,n){var o=n(1);o.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),o.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){})},26:function(t,e,n){"use strict";var o=n(41),i=n(13),r=n(48),a=n(9),u=n(8),s=n(58),c=n(15),l=n(60),d=n(2)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,p,y,v,g){s(n,e,p);var x,m,L,_=function(t){if(!f&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},b=e+" Iterator",I="values"==y,w=!1,S=t.prototype,E=S[d]||S["@@iterator"]||y&&S[y],M=E||_(y),j=y?I?_("entries"):M:void 0,T="Array"==e&&S.entries||E;if(T&&(L=l(T.call(new t)))!==Object.prototype&&L.next&&(c(L,b,!0),o||"function"==typeof L[d]||a(L,d,h)),I&&E&&"values"!==E.name&&(w=!0,M=function(){return E.call(this)}),o&&!g||!f&&!w&&S[d]||a(S,d,M),u[e]=M,u[b]=h,y)if(x={values:I?M:_("values"),keys:v?M:_("keys"),entries:j},g)for(m in x)m in S||r(S,m,x[m]);else i(i.P+i.F*(f||w),e,x);return x}},27:function(t,e,n){var o=n(3).document;t.exports=o&&o.documentElement},273:function(t,e,n){var o=n(1);n(274),n(276),n(277);var i=n(278),r=n(279);o.registerLayout(i),o.registerVisual(r)},274:function(t,e,n){var o=n(35),i=n(224),r=n(25).encodeHTML,a=o.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(t){var e=t.edges||t.links,n=t.data||t.nodes;if(n&&e)return i(n,e,this,!0).data},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var o=this.getDataParams(t,n),i=o.data,u=i.source+" -- "+i.target;return o.value&&(u+=" : "+o.value),r(u)}return a.superCall(this,"formatTooltip",t,e)},optionUpdated:function(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency="allEdges")},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}}),u=a;t.exports=u},275:function(t,e,n){n(12).__DEV__;var o=n(0),i=n(109).enableClassCheck;function r(t){return"_EC_"+t}var a=function(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},u=a.prototype;function s(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==e?-1:e}function c(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}u.type="graph",u.isDirected=function(){return this._directed},u.addNode=function(t,e){t=t||""+e;var n=this._nodesMap;if(!n[r(t)]){var o=new s(t,e);return o.hostGraph=this,this.nodes.push(o),n[r(t)]=o,o}},u.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},u.getNodeById=function(t){return this._nodesMap[r(t)]},u.addEdge=function(t,e,n){var o=this._nodesMap,i=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),s.isInstance(t)||(t=o[r(t)]),s.isInstance(e)||(e=o[r(e)]),t&&e){var a=t.id+"-"+e.id;if(!i[a]){var u=new c(t,e,n);return u.hostGraph=this,this._directed&&(t.outEdges.push(u),e.inEdges.push(u)),t.edges.push(u),t!==e&&e.edges.push(u),this.edges.push(u),i[a]=u,u}}},u.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},u.getEdge=function(t,e){s.isInstance(t)&&(t=t.id),s.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},u.eachNode=function(t,e){for(var n=this.nodes,o=n.length,i=0;i<o;i++)n[i].dataIndex>=0&&t.call(e,n[i],i)},u.eachEdge=function(t,e){for(var n=this.edges,o=n.length,i=0;i<o;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&t.call(e,n[i],i)},u.breadthFirstTraverse=function(t,e,n,o){if(s.isInstance(e)||(e=this._nodesMap[r(e)]),e){for(var i="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(o,e,null))for(var u=[e];u.length;){var c=u.shift(),l=c[i];for(a=0;a<l.length;a++){var d=l[a],f=d.node1===c?d.node2:d.node1;if(!f.__visited){if(t.call(o,f,c))return;u.push(f),f.__visited=!0}}}}},u.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,o=this.edges,i=0,r=n.length;i<r;i++)n[i].dataIndex=-1;for(i=0,r=t.count();i<r;i++)n[t.getRawIndex(i)].dataIndex=i;e.filterSelf(function(t){var n=o[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(i=0,r=o.length;i<r;i++)o[i].dataIndex=-1;for(i=0,r=e.count();i<r;i++)o[e.getRawIndex(i)].dataIndex=i},u.clone=function(){for(var t=new a(this._directed),e=this.nodes,n=this.edges,o=0;o<e.length;o++)t.addNode(e[o].id,e[o].dataIndex);for(o=0;o<n.length;o++){var i=n[o];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},s.prototype={constructor:s,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},c.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)};var l=function(t,e){return{getValue:function(n){var o=this[t][e];return o.get(o.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,o){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,o)},getVisual:function(n,o){return this[t][e].getItemVisual(this.dataIndex,n,o)},setLayout:function(n,o){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,o)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}};o.mixin(s,l("hostGraph","data")),o.mixin(c,l("hostGraph","edgeData")),a.Node=s,a.Edge=c,i(s),i(c);var d=a;t.exports=d},276:function(t,e,n){var o=n(4),i=n(1),r=n(0),a=["itemStyle","opacity"],u=["lineStyle","opacity"];function s(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function c(t,e,n){var o=t.getGraphicEl(),i=s(t,e);null!=n&&(null==i&&(i=1),i*=n),o.downplay&&o.downplay(),o.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",i)})}function l(t,e){var n=s(t,e),o=t.getGraphicEl();o.highlight&&o.highlight(),o.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",n)})}var d=o.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var n=e.extent;"vertical"===e.orient?(t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()}}),f=i.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,n){var i=this,r=t.getGraph(),a=this.group,u=t.layoutInfo,s=u.width,c=u.height,l=t.getData(),f=t.getData("edge"),h=t.get("orient");this._model=t,a.removeAll(),a.attr("position",[u.x,u.y]),r.eachEdge(function(e){var n=new d;n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var i,r,u,l,p,y,v,g,x=e.getModel("lineStyle"),m=x.get("curveness"),L=e.node1.getLayout(),_=e.node1.getModel(),b=_.get("localX"),I=_.get("localY"),w=e.node2.getLayout(),S=e.node2.getModel(),E=S.get("localX"),M=S.get("localY"),j=e.getLayout();switch(n.shape.extent=Math.max(1,j.dy),n.shape.orient=h,"vertical"===h?(i=(null!=b?b*s:L.x)+j.sy,r=(null!=I?I*c:L.y)+L.dy,u=(null!=E?E*s:w.x)+j.ty,p=i,y=r*(1-m)+(l=null!=M?M*c:w.y)*m,v=u,g=r*m+l*(1-m)):(i=(null!=b?b*s:L.x)+L.dx,r=(null!=I?I*c:L.y)+j.sy,p=i*(1-m)+(u=null!=E?E*s:w.x)*m,y=r,v=i*m+u*(1-m),g=l=(null!=M?M*c:w.y)+j.ty),n.setShape({x1:i,y1:r,x2:u,y2:l,cpx1:p,cpy1:y,cpx2:v,cpy2:g}),n.setStyle(x.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color");break;case"target":n.style.fill=e.node2.getVisual("color")}o.setHoverStyle(n,e.getModel("emphasis.lineStyle").getItemStyle()),a.add(n),f.setItemGraphicEl(e.dataIndex,n)}),r.eachNode(function(e){var n=e.getLayout(),i=e.getModel(),r=i.get("localX"),u=i.get("localY"),d=i.getModel("label"),f=i.getModel("emphasis.label"),h=new o.Rect({shape:{x:null!=r?r*s:n.x,y:null!=u?u*c:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle()}),p=e.getModel("emphasis.itemStyle").getItemStyle();o.setLabelStyle(h.style,p,d,f,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),h.setStyle("fill",e.getVisual("color")),o.setHoverStyle(h,p),a.add(h),l.setItemGraphicEl(e.dataIndex,h),h.dataType="node"}),l.eachItemGraphicEl(function(e,o){var r=l.getItemModel(o);r.get("draggable")&&(e.drift=function(e,r){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=r,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:l.getRawIndex(o),localX:this.shape.x/s,localY:this.shape.y/c})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move"),r.get("focusNodeAdjacency")&&(e.off("mouseover").on("mouseover",function(){i._focusAdjacencyDisabled||n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.off("mouseout").on("mouseout",function(){i._focusAdjacencyDisabled||n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))}),f.eachItemGraphicEl(function(e,o){f.getItemModel(o).get("focusNodeAdjacency")&&(e.off("mouseover").on("mouseover",function(){i._focusAdjacencyDisabled||n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),e.off("mouseout").on("mouseout",function(){i._focusAdjacencyDisabled||n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))}),!this._data&&t.get("animation")&&a.setClipPath(function(t,e,n){var i=new o.Rect({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return o.initProps(i,{shape:{width:t.width+20,height:t.height+20}},e,n),i}(a.getBoundingRect(),t,function(){a.removeClipPath()})),this._data=t.getData()},dispose:function(){},focusNodeAdjacency:function(t,e,n,o){var i=this._model.getData(),s=i.graph,d=o.dataIndex,f=i.getItemModel(d),h=o.edgeDataIndex;if(null!=d||null!=h){var p=s.getNodeByIndex(d),y=s.getEdgeByIndex(h);if(s.eachNode(function(t){c(t,a,.1)}),s.eachEdge(function(t){c(t,u,.1)}),p){l(p,a);var v=f.get("focusNodeAdjacency");"outEdges"===v?r.each(p.outEdges,function(t){t.dataIndex<0||(l(t,u),l(t.node2,a))}):"inEdges"===v?r.each(p.inEdges,function(t){t.dataIndex<0||(l(t,u),l(t.node1,a))}):"allEdges"===v&&r.each(p.edges,function(t){t.dataIndex<0||(l(t,u),l(t.node1,a),l(t.node2,a))})}y&&(l(y,u),l(y.node1,a),l(y.node2,a))}},unfocusNodeAdjacency:function(t,e,n,o){var i=this._model.getGraph();i.eachNode(function(t){c(t,a)}),i.eachEdge(function(t){c(t,u)})}});t.exports=f},277:function(t,e,n){var o=n(1);n(225),o.registerAction({type:"dragNode",event:"dragNode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},278:function(t,e,n){var o=n(14),i=n(0),r=n(10).groupData;n(12).__DEV__;function a(t,e,n,o,r){i.each(t,function(t){var i,a,u,s=0,c=t.length;if("vertical"===r){var l;for(t.sort(function(t,e){return t.getLayout().x-e.getLayout().x}),u=0;u<c;u++)(a=s-(i=t[u]).getLayout().x)>0&&(l=i.getLayout().x+a,i.setLayout({x:l},!0)),s=i.getLayout().x+i.getLayout().dx+e;if((a=s-e-o)>0)for(l=i.getLayout().x-a,i.setLayout({x:l},!0),s=l,u=c-2;u>=0;--u)(a=(i=t[u]).getLayout().x+i.getLayout().dx+e-s)>0&&(l=i.getLayout().x-a,i.setLayout({x:l},!0)),s=i.getLayout().x}else{var d;for(t.sort(function(t,e){return t.getLayout().y-e.getLayout().y}),u=0;u<c;u++)(a=s-(i=t[u]).getLayout().y)>0&&(d=i.getLayout().y+a,i.setLayout({y:d},!0)),s=i.getLayout().y+i.getLayout().dy+e;if((a=s-e-n)>0)for(d=i.getLayout().y-a,i.setLayout({y:d},!0),s=d,u=c-2;u>=0;--u)(a=(i=t[u]).getLayout().y+i.getLayout().dy+e-s)>0&&(d=i.getLayout().y-a,i.setLayout({y:d},!0)),s=i.getLayout().y}})}function u(t,e,n){i.each(t.slice().reverse(),function(t){i.each(t,function(t){if(t.outEdges.length){var o=f(t.outEdges,s,n)/f(t.outEdges,d,n);if("vertical"===n){var i=t.getLayout().x+(o-l(t,n))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(o-l(t,n))*e;t.setLayout({y:r},!0)}}})})}function s(t,e){return l(t.node2,e)*t.getValue()}function c(t,e){return l(t.node1,e)*t.getValue()}function l(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function d(t){return t.getValue()}function f(t,e,n){for(var o=0,i=t.length,r=-1;++r<i;){var a=+e.call(t,t[r],n);isNaN(a)||(o+=a)}return o}function h(t,e,n){i.each(t,function(t){i.each(t,function(t){if(t.inEdges.length){var o=f(t.inEdges,c,n)/f(t.inEdges,d,n);if("vertical"===n){var i=t.getLayout().x+(o-l(t,n))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(o-l(t,n))*e;t.setLayout({y:r},!0)}}})})}t.exports=function(t,e,n){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),s=t.get("nodeGap"),c=function(t,e){return o.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=c;var l=c.width,p=c.height,y=t.getGraph(),v=y.nodes,g=y.edges;!function(t){i.each(t,function(t){var e=f(t.outEdges,d),n=f(t.inEdges,d),o=Math.max(e,n);t.setLayout({value:o},!0)})}(v),function(t,e,n,o,s,c,l,d){(function(t,e,n,o,r,a){for(var u=[],s=[],c=[],l=[],d=0,f=0;f<e.length;f++)u[f]=1;for(f=0;f<t.length;f++)s[f]=t[f].inEdges.length,0===s[f]&&c.push(t[f]);for(;c.length;){for(var h=0;h<c.length;h++){var p=c[h];"vertical"===a?(p.setLayout({y:d},!0),p.setLayout({dy:n},!0)):(p.setLayout({x:d},!0),p.setLayout({dx:n},!0));for(var y=0;y<p.outEdges.length;y++){var v=p.outEdges[y],g=e.indexOf(v);u[g]=0;var x=v.node2,m=t.indexOf(x);0==--s[m]&&l.push(x)}}++d,c=l,l=[]}for(f=0;f<u.length;f++);(function(t,e,n){i.each(t,function(t){t.outEdges.length||("vertical"===n?t.setLayout({y:e-1},!0):t.setLayout({x:e-1},!0))})})(t,d,a),function(t,e,n){i.each(t,function(t){if("vertical"===n){var o=t.getLayout().y*e;t.setLayout({y:o},!0)}else{var i=t.getLayout().x*e;t.setLayout({x:i},!0)}})}(t,"vertical"===a?(r-n)/(d-1):(o-n)/(d-1),a)})(t,e,n,s,c,d),function(t,e,n,o,s,c,l){var d=function(t,e){var n=[],o="vertical"===e?"y":"x",a=r(t,function(t){return t.getLayout()[o]});return a.keys.sort(function(t,e){return t-e}),i.each(a.keys,function(t){n.push(a.buckets.get(t))}),n}(t,l);(function(t,e,n,o,r,a,u){var s=[];i.each(e,function(t){var e=t.length,n=0,c=0;i.each(t,function(t){n+=t.getLayout().value}),c="vertical"===u?(r-(e-1)*a)/n:(o-(e-1)*a)/n,s.push(c)}),s.sort(function(t,e){return t-e});var c=s[0];i.each(e,function(t){i.each(t,function(t,e){var n=t.getLayout().value*c;"vertical"===u?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),i.each(n,function(t){var e=+t.getValue()*c;t.setLayout({dy:e},!0)})})(0,d,e,n,o,s,l),a(d,s,n,o,l);for(var f=1;c>0;c--)u(d,f*=.99,l),a(d,s,n,o,l),h(d,f,l),a(d,s,n,o,l)}(t,e,c,s,o,l,d),function(t,e){i.each(t,function(t){"vertical"===e?(t.outEdges.sort(function(t,e){return t.node2.getLayout().x-e.node2.getLayout().x}),t.inEdges.sort(function(t,e){return t.node1.getLayout().x-e.node1.getLayout().x})):(t.outEdges.sort(function(t,e){return t.node2.getLayout().y-e.node2.getLayout().y}),t.inEdges.sort(function(t,e){return t.node1.getLayout().y-e.node1.getLayout().y}))}),i.each(t,function(t){var e=0,n=0;i.each(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),i.each(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}(t,d)}(v,g,n,s,l,p,0!==i.filter(v,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations"),t.get("orient"))})}},279:function(t,e,n){var o=n(86),i=n(0);t.exports=function(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph().nodes;if(e.length){var n=1/0,r=-1/0;i.each(e,function(t){var e=t.getLayout().value;e<n&&(n=e),e>r&&(r=e)}),i.each(e,function(e){var i=new o({type:"color",mappingMethod:"linear",dataExtent:[n,r],visual:t.get("color")}).mapValueToVisual(e.getLayout().value);e.setVisual("color",i);var a=e.getModel().get("itemStyle.color");null!=a&&e.setVisual("color",a)})}})}},28:function(t,e,n){var o=n(19),i=n(2)("toStringTag"),r="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:r?o(e):"Object"==(a=o(e))&&"function"==typeof e.callee?"Arguments":a}},29:function(t,e,n){var o=n(5),i=n(21),r=n(2)("species");t.exports=function(t,e){var n,a=o(t).constructor;return void 0===a||void 0==(n=o(a)[r])?e:i(n)}},30:function(t,e,n){var o,i,r,a=n(20),u=n(67),s=n(27),c=n(43),l=n(3),d=l.process,f=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,y=l.Dispatch,v=0,g={},x=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},m=function(t){x.call(t.data)};f&&h||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){u("function"==typeof t?t:Function(t),e)},o(v),v},h=function(t){delete g[t]},"process"==n(19)(d)?o=function(t){d.nextTick(a(x,t,1))}:y&&y.now?o=function(t){y.now(a(x,t,1))}:p?(r=(i=new p).port2,i.port1.onmessage=m,o=a(r.postMessage,r,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(o=function(t){l.postMessage(t+"","*")},l.addEventListener("message",m,!1)):o="onreadystatechange"in c("script")?function(t){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),x.call(t)}}:function(t){setTimeout(a(x,t,1),0)}),t.exports={set:f,clear:h}},31:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},32:function(t,e,n){var o=n(5),i=n(37),r=n(17);t.exports=function(t,e){if(o(t),i(e)&&e.constructor===t)return e;var n=r.f(t);return(0,n.resolve)(e),n.promise}},373:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),i=n.n(o),r=n(273),a=(n.n(r),n(374)),u=n(33);e.default=i()({},u.a,{name:"CbiSankeyChart",data:function(){return this.chartHandler=a.a,{}}})},374:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var o=n(11),i=n.n(o),r=n(18),a=n(74);var u=function(t,e,n,o){var u=n.links,s=n.dimension,c=void 0===s?t[0]:s,l=n.measures,d=void 0===l?t[1]:l,f=n.dataType,h=void 0===f?["normal","normal"]:f,p=n.digit,y=void 0===p?2:p,v=n.valueFull,g=void 0!==v&&v,x=n.useDataValue,m=void 0!==x&&x,L=n.label,_=n.itemStyle,b=n.lineStyle;if(u)return{tooltip:function(t){var e=t.itemDataType,n=t.linksDataType,o=t.digit;return{trigger:"item",formatter:function(t){var i=[],u=t.name,s=t.data,c=t.value,l=t.color;return i.push(Object(a.g)(l)),i.push(u+" : "),s&&s.source?i.push(Object(r.c)(c,n,o)+"<br />"):i.push(Object(r.c)(c,e,o)+"<br />"),i.join("")}}}({itemDataType:h[0],linksDataType:h[1],digit:y}),series:function(t){var e=t.rows,n=t.dimension,o=t.measures,r=t.links,a=t.valueFull,u=t.useDataValue,s=t.label,c=t.itemStyle,l=t.lineStyle,d={},f={type:"sankey",data:e.map(function(t){return d[t[n]]=t[o],{name:t[n],value:t[o]}}),links:u?r.map(function(t){return i()({},t,{value:d[t.target]})}):a?r:r.map(function(t){return null==t.value?i()({},t,{value:d[t.target]}):t})};return s&&(f.label=s),c&&(f.itemStyle=c),l&&(f.lineStyle=l),[f]}({rows:e,dimension:c,measures:d,links:u,valueFull:g,useDataValue:m,label:L,itemStyle:_,lineStyle:b})}}},46:function(t,e,n){"use strict";var o=n(57)(!0);n(26)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=o(e,n),this._i+=t.length,{value:t,done:!1})})},47:function(t,e){},48:function(t,e,n){t.exports=n(9)},49:function(t,e,n){var o=n(5),i=n(59),r=n(96),a=n(44)("IE_PROTO"),u=function(){},s=function(){var t,e=n(43)("iframe"),o=r.length;for(e.style.display="none",n(27).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;o--;)delete s.prototype[r[o]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=o(t),n=new u,u.prototype=null,n[a]=t):n=s(),void 0===e?n:i(n,e)}},50:function(t,e,n){n(61);for(var o=n(3),i=n(9),r=n(8),a=n(2)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var c=u[s],l=o[c],d=l&&l.prototype;d&&!d[a]&&i(d,a,c),r[c]=r.Array}},51:function(t,e,n){var o=n(5);t.exports=function(t,e,n,i){try{return i?e(o(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&o(r.call(t)),e}}},52:function(t,e,n){var o=n(8),i=n(2)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||r[i]===t)}},53:function(t,e,n){var o=n(28),i=n(2)("iterator"),r=n(8);t.exports=n(6).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||r[o(t)]}},54:function(t,e,n){var o=n(2)("iterator"),i=!1;try{var r=[7][o]();r.return=function(){i=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var r=[7],a=r[o]();a.next=function(){return{done:n=!0}},r[o]=function(){return a},t(r)}catch(t){}return n}},55:function(t,e,n){t.exports={default:n(56),__esModule:!0}},56:function(t,e,n){n(47),n(46),n(50),n(64),n(72),n(73),t.exports=n(6).Promise},57:function(t,e,n){var o=n(98),i=n(97);t.exports=function(t){return function(e,n){var r,a,u=String(i(e)),s=o(n),c=u.length;return s<0||s>=c?t?"":void 0:(r=u.charCodeAt(s))<55296||r>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):r:t?u.slice(s,s+2):a-56320+(r-55296<<10)+65536}}},58:function(t,e,n){"use strict";var o=n(49),i=n(81),r=n(15),a={};n(9)(a,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=o(a,{next:i(1,n)}),r(t,e+" Iterator")}},59:function(t,e,n){var o=n(16),i=n(5),r=n(79);t.exports=n(22)?Object.defineProperties:function(t,e){i(t);for(var n,a=r(e),u=a.length,s=0;u>s;)o.f(t,n=a[s++],e[n]);return t}},60:function(t,e,n){var o=n(36),i=n(88),r=n(44)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),o(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},61:function(t,e,n){"use strict";var o=n(62),i=n(63),r=n(8),a=n(76);t.exports=n(26)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},62:function(t,e){t.exports=function(){}},63:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},64:function(t,e,n){"use strict";var o,i,r,a,u=n(41),s=n(3),c=n(20),l=n(28),d=n(13),f=n(37),h=n(21),p=n(65),y=n(66),v=n(29),g=n(30).set,x=n(68)(),m=n(17),L=n(31),_=n(69),b=n(32),I=s.TypeError,w=s.process,S=w&&w.versions,E=S&&S.v8||"",M=s.Promise,j="process"==l(w),T=function(){},A=i=m.f,D=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(T,T)};return(j||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof e&&0!==E.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),V=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;x(function(){for(var o=t._v,i=1==t._s,r=0,a=function(e){var n,r,a,u=i?e.ok:e.fail,s=e.resolve,c=e.reject,l=e.domain;try{u?(i||(2==t._h&&k(t),t._h=1),!0===u?n=o:(l&&l.enter(),n=u(o),l&&(l.exit(),a=!0)),n===e.promise?c(I("Promise-chain cycle")):(r=V(n))?r.call(n,s,c):s(n)):c(o)}catch(t){l&&!a&&l.exit(),c(t)}};n.length>r;)a(n[r++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){g.call(s,function(){var e,n,o,i=t._v,r=P(t);if(r&&(e=L(function(){j?w.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(o=s.console)&&o.error&&o.error("Unhandled promise rejection",i)}),t._h=j||P(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},P=function(t){return 1!==t._h&&0===(t._a||t._c).length},k=function(t){g.call(s,function(){var e;j?w.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},C=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},G=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw I("Promise can't be resolved itself");(e=V(t))?x(function(){var o={_w:n,_d:!1};try{e.call(t,c(G,o,1),c(C,o,1))}catch(t){C.call(o,t)}}):(n._v=t,n._s=1,N(n,!1))}catch(t){C.call({_w:n,_d:!1},t)}}};D||(M=function(t){p(this,M,"Promise","_h"),h(t),o.call(this);try{t(c(G,this,1),c(C,this,1))}catch(t){C.call(this,t)}},(o=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(70)(M.prototype,{then:function(t,e){var n=A(v(this,M));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=j?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new o;this.promise=t,this.resolve=c(G,t,1),this.reject=c(C,t,1)},m.f=A=function(t){return t===M||t===a?new r(t):i(t)}),d(d.G+d.W+d.F*!D,{Promise:M}),n(15)(M,"Promise"),n(71)("Promise"),a=n(6).Promise,d(d.S+d.F*!D,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),d(d.S+d.F*(u||!D),"Promise",{resolve:function(t){return b(u&&this===a?M:this,t)}}),d(d.S+d.F*!(D&&n(54)(function(t){M.all(t).catch(T)})),"Promise",{all:function(t){var e=this,n=A(e),o=n.resolve,i=n.reject,r=L(function(){var n=[],r=0,a=1;y(t,!1,function(t){var u=r++,s=!1;n.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,n[u]=t,--a||o(n))},i)}),--a||o(n)});return r.e&&i(r.v),n.promise},race:function(t){var e=this,n=A(e),o=n.reject,i=L(function(){y(t,!1,function(t){e.resolve(t).then(n.resolve,o)})});return i.e&&o(i.v),n.promise}})},65:function(t,e){t.exports=function(t,e,n,o){if(!(t instanceof e)||void 0!==o&&o in t)throw TypeError(n+": incorrect invocation!");return t}},66:function(t,e,n){var o=n(20),i=n(51),r=n(52),a=n(5),u=n(102),s=n(53),c={},l={};(e=t.exports=function(t,e,n,d,f){var h,p,y,v,g=f?function(){return t}:s(t),x=o(n,d,e?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(r(g)){for(h=u(t.length);h>m;m++)if((v=e?x(a(p=t[m])[0],p[1]):x(t[m]))===c||v===l)return v}else for(y=g.call(t);!(p=y.next()).done;)if((v=i(y,x,p.value,e))===c||v===l)return v}).BREAK=c,e.RETURN=l},67:function(t,e){t.exports=function(t,e,n){var o=void 0===n;switch(e.length){case 0:return o?t():t.call(n);case 1:return o?t(e[0]):t.call(n,e[0]);case 2:return o?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},68:function(t,e,n){var o=n(3),i=n(30).set,r=o.MutationObserver||o.WebKitMutationObserver,a=o.process,u=o.Promise,s="process"==n(19)(a);t.exports=function(){var t,e,n,c=function(){var o,i;for(s&&(o=a.domain)&&o.exit();t;){i=t.fn,t=t.next;try{i()}catch(o){throw t?n():e=void 0,o}}e=void 0,o&&o.enter()};if(s)n=function(){a.nextTick(c)};else if(!r||o.navigator&&o.navigator.standalone)if(u&&u.resolve){var l=u.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(o,c)};else{var d=!0,f=document.createTextNode("");new r(c).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(o){var i={fn:o,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},69:function(t,e,n){var o=n(3).navigator;t.exports=o&&o.userAgent||""},70:function(t,e,n){var o=n(9);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:o(t,i,e[i]);return t}},71:function(t,e,n){"use strict";var o=n(3),i=n(6),r=n(16),a=n(22),u=n(2)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:o[t];a&&e&&!e[u]&&r.f(e,u,{configurable:!0,get:function(){return this}})}},72:function(t,e,n){"use strict";var o=n(13),i=n(6),r=n(3),a=n(29),u=n(32);o(o.P+o.R,"Promise",{finally:function(t){var e=a(this,i.Promise||r.Promise),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then(function(){return n})}:t,n?function(n){return u(e,t()).then(function(){throw n})}:t)}})},73:function(t,e,n){"use strict";var o=n(13),i=n(17),r=n(31);o(o.S,"Promise",{try:function(t){var e=i.f(this),n=r(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},8:function(t,e){t.exports={}},86:function(t,e,n){var o=n(0),i=n(108),r=n(7).linearMap,a=o.each,u=o.isObject,s=-1,c=function(t){var e=t.mappingMethod,n=t.type,i=this.option=o.clone(t);this.type=n,this.mappingMethod=e,this._normalizeData=L[e];var r=l[n];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._doMap=r._doMap[e],"piecewise"===e?(d(i),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,o.each(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}(i)):"category"===e?i.categories?function(t){var e=t.categories,n=t.visual,i=t.categoryMap={};if(a(e,function(t,e){i[t]=e}),!o.isArray(n)){var r=[];o.isObject(n)?a(n,function(t,e){var n=i[e];r[null!=n?n:s]=t}):r[s]=n,n=m(t,r)}for(var u=e.length-1;u>=0;u--)null==n[u]&&(delete i[e[u]],e.pop())}(i):d(i,!0):(o.assert("linear"!==e||i.dataExtent),d(i))};c.prototype={constructor:c,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return o.bind(this._normalizeData,this)}};var l=c.visualHandlers={color:{applyVisual:p("color"),getColorMapper:function(){var t=this.option;return o.bind("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),y.call(this,t)}:function(e,n,o){var r=!!o;return!n&&(e=this._normalizeData(e)),o=i.fastLerp(e,t.parsedVisual,o),r?o:i.stringify(o,"rgba")},this)},_doMap:{linear:function(t){return i.stringify(i.fastLerp(t,this.option.parsedVisual),"rgba")},category:y,piecewise:function(t,e){var n=x.call(this,e);return null==n&&(n=i.stringify(i.fastLerp(t,this.option.parsedVisual),"rgba")),n},fixed:v}},colorHue:f(function(t,e){return i.modifyHSL(t,e)}),colorSaturation:f(function(t,e){return i.modifyHSL(t,null,e)}),colorLightness:f(function(t,e){return i.modifyHSL(t,null,null,e)}),colorAlpha:f(function(t,e){return i.modifyAlpha(t,e)}),opacity:{applyVisual:p("opacity"),_doMap:g([0,1])},liftZ:{applyVisual:p("liftZ"),_doMap:{linear:v,category:v,piecewise:v,fixed:v}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);if(o.isString(i))n("symbol",i);else if(u(i))for(var r in i)i.hasOwnProperty(r)&&n(r,i[r])},_doMap:{linear:h,category:y,piecewise:function(t,e){var n=x.call(this,e);return null==n&&(n=h.call(this,t)),n},fixed:v}},symbolSize:{applyVisual:p("symbolSize"),_doMap:g([0,1])}};function d(t,e){var n=t.visual,i=[];o.isObject(n)?a(n,function(t){i.push(t)}):null!=n&&i.push(n);e||1!==i.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(i[1]=i[0]),m(t,i)}function f(t){return{applyVisual:function(e,n,o){e=this.mapValueToVisual(e),o("color",t(n("color"),e))},_doMap:g([0,1])}}function h(t){var e=this.option.visual;return e[Math.round(r(t,[0,1],[0,e.length-1],!0))]||{}}function p(t){return function(e,n,o){o(t,this.mapValueToVisual(e))}}function y(t){var e=this.option.visual;return e[this.option.loop&&t!==s?t%e.length:t]}function v(){return this.option.visual[0]}function g(t){return{linear:function(e){return r(e,t,this.option.visual,!0)},category:y,piecewise:function(e,n){var o=x.call(this,n);return null==o&&(o=r(e,t,this.option.visual,!0)),o},fixed:v}}function x(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var o=n[c.findPieceIndex(t,n)];if(o&&o.visual)return o.visual[this.type]}}function m(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=o.map(e,function(t){return i.parse(t)})),e}var L={linear:function(t){return r(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=c.findPieceIndex(t,e,!0);if(null!=n)return r(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?s:e},fixed:o.noop};function _(t,e,n){return t?e<=n:e<n}c.listVisualTypes=function(){var t=[];return o.each(l,function(e,n){t.push(n)}),t},c.addVisualHandler=function(t,e){l[t]=e},c.isValidType=function(t){return l.hasOwnProperty(t)},c.eachVisual=function(t,e,n){o.isObject(t)?o.each(t,e,n):e.call(n,t)},c.mapVisual=function(t,e,n){var i,r=o.isArray(t)?[]:o.isObject(t)?{}:(i=!0,null);return c.eachVisual(t,function(t,o){var a=e.call(n,t,o);i?r=a:r[o]=a}),r},c.retrieveVisuals=function(t){var e,n={};return t&&a(l,function(o,i){t.hasOwnProperty(i)&&(n[i]=t[i],e=!0)}),e?n:null},c.prepareVisualTypes=function(t){if(u(t)){var e=[];a(t,function(t,n){e.push(n)}),t=e}else{if(!o.isArray(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},c.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},c.findPieceIndex=function(t,e,n){for(var o,i=1/0,r=0,a=e.length;r<a;r++){var u=e[r].value;if(null!=u){if(u===t||"string"==typeof u&&u===t+"")return r;n&&d(u,r)}}for(r=0,a=e.length;r<a;r++){var s=e[r],c=s.interval,l=s.close;if(c){if(c[0]===-1/0){if(_(l[1],t,c[1]))return r}else if(c[1]===1/0){if(_(l[0],c[0],t))return r}else if(_(l[0],c[0],t)&&_(l[1],t,c[1]))return r;n&&d(c[0],r),n&&d(c[1],r)}}if(n)return t===1/0?e.length-1:t===-1/0?0:o;function d(e,n){var r=Math.abs(e-t);r<i&&(i=r,o=n)}};var b=c;t.exports=b}},[373])});